<div *ngIf="isSignedUp; else signupForm">
  Your registration is successful.
</div>

<ng-template #signupForm>
  <div class="col-md-6">
    <div class="card">

      <div class="card-header">
        Add New User
      </div>

      <div class="card-body">
        <form name="form" (ngSubmit)="f.form.valid && onSubmit()" #f="ngForm" novalidate>

          <div class="form-group">
            <label for="name">Name</label>
            <input type="text" id="name" class="form-control" name="name" [(ngModel)]="user.name" #nameNgModel="ngModel" [ngClass]="{ 'is-invalid': f.submitted && nameNgModel.invalid }" minlength="3" autofocus required />
            <div *ngIf="f.submitted && nameNgModel.invalid" class="invalid-feedback">
              <div *ngIf="nameNgModel.errors.required">Name is required</div>
              <div *ngIf="nameNgModel.errors.minlength">Name must be at least 3 characters</div>
            </div>
          </div>

          <div class="form-group">
            <label for="username">Username</label>
            <input type="text" id="username" class="form-control" name="username" [(ngModel)]="user.username" #usernameNgModel="ngModel" [ngClass]="{ 'is-invalid': f.submitted && usernameNgModel.invalid }" minlength="3" required />
            <div *ngIf="f.submitted && usernameNgModel.invalid" class="invalid-feedback">
              <div *ngIf="usernameNgModel.errors.required">Username is required</div>
              <div *ngIf="usernameNgModel.errors.minlength">Username must be at least 3 characters</div>
            </div>
          </div>

          <div class="form-group">
            <label for="email">Email</label>
            <input type="text" id="email" class="form-control" name="email" [(ngModel)]="user.email" #emailNgModel="ngModel" [ngClass]="{ 'is-invalid': f.submitted && emailNgModel.invalid }" required email />
            <div *ngIf="f.submitted && emailNgModel.invalid" class="invalid-feedback">
              <div *ngIf="emailNgModel.errors.required">Email is required</div>
              <div *ngIf="emailNgModel.errors.email">Email must be a valid email address</div>
            </div>
          </div>

          <div class="form-group">
            <label for="password">Password</label>
            <input type="password" id="password" class="form-control" name="password" [(ngModel)]="user.password" #passwordNgModel="ngModel" [ngClass]="{ 'is-invalid': f.submitted && passwordNgModel.invalid }" minlength="6" required />
            <div *ngIf="f.submitted && passwordNgModel.invalid" class="invalid-feedback">
              <div *ngIf="passwordNgModel.errors.required">Password is required</div>
              <div *ngIf="passwordNgModel.errors.minlength">Password must be at least 6 characters</div>
            </div>
          </div>

          <div class="form-group">
            <div class="custom-control custom-checkbox">
              <input type="checkbox" class="custom-control-input" id="user" [(ngModel)]="userChecked" [ngModelOptions]="{standalone: true}">
              <label for="user" class="custom-control-label">User</label>
            </div>
            <div class="custom-control custom-checkbox">
              <input type="checkbox" class="custom-control-input" id="pm" [(ngModel)]="pmChecked" [ngModelOptions]="{standalone: true}">
              <label for="pm" class="custom-control-label">PM</label>
            </div>
            <div class="custom-control custom-checkbox">
              <input type="checkbox" class="custom-control-input" id="admin" [(ngModel)]="adminChecked" [ngModelOptions]="{standalone: true}">
              <label for="admin" class="custom-control-label">Admin</label>
            </div>
          </div>

          <div class="form-group">
            <button class="btn btn-primary">Register</button>
            <hr>
            <div *ngIf="f.submitted && isSignUpFailed" class="alert alert-warning">
              Signup failed!<br/>{{ errorMessage }}
            </div>
          </div>

        </form>
      </div>

    </div>
  </div>
</ng-template>
